(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{CuGy:function(t,a,e){"use strict";var r=e("TzHl");e.n(r).a},TzHl:function(t,a,e){var r=e("wd3j");"string"==typeof r&&(r=[[t.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};e("aET+")(r,n);r.locals&&(t.exports=r.locals)},cyjJ:function(t,a,e){"use strict";e.r(a);var r=e("o0o1"),n=e.n(r),o=e("H8ri"),s=o.b.reactiveProp,c={extends:o.a,mixins:[s],props:["options"],mounted:function(){this.renderChart(this.chartData,{responsive:!0,maintainAspectRatio:!1})}},i=e("wd/R"),l=e.n(i),d=e("BWV3"),u=e("vDqi"),h=e.n(u);function f(t,a,e,r,n,o,s){try{var c=t[o](s),i=c.value}catch(t){return void e(t)}c.done?a(i):Promise.resolve(i).then(r,n)}function b(t){return function(){var a=this,e=arguments;return new Promise((function(r,n){var o=t.apply(a,e);function s(t){f(o,r,n,s,c,"next",t)}function c(t){f(o,r,n,s,c,"throw",t)}s(void 0)}))}}function m(t){return v.apply(this,arguments)}function v(){return(v=b(n.a.mark((function t(a){var e,r,o,s,c;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=a.dateStart,r=a.dateEnd,o="start_date=".concat(e,"&end_date=").concat(r),t.next=4,h.a.get("/api/stats?".concat(o));case 4:return s=t.sent,c=s.data,t.abrupt("return",c);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function p(t){return function(t){if(Array.isArray(t)){for(var a=0,e=new Array(t.length);a<t.length;a++)e[a]=t[a];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function g(t,a,e,r,n,o,s){try{var c=t[o](s),i=c.value}catch(t){return void e(t)}c.done?a(i):Promise.resolve(i).then(r,n)}var C,y,k={components:{BarChart:c},mounted:function(){this.months=this.parseMonths()},data:function(){return{dataCollection:null,dateStart:null,dateEnd:null,monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],months:[{name:"Текущий месяц"},{name:"Сентябрь, 2019"},{name:"Август, 2019"},{name:"Июль, 2019"},{name:"Июнь, 2019"},{name:"Май, 2019"},{name:"Апрель, 2019"}]}},methods:{getData:(C=n.a.mark((function t(){var a,e,r;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.dateStart&&this.dateEnd){t.next=3;break}return Object(d.a)("Выберите дату","","warning"),t.abrupt("return");case 3:if(a=l()(this.dateStart).format("YYYY-MM-DD"),e=l()(this.dateEnd).endOf("month").format("YYYY-MM-DD"),!(l()(e).diff(a)<1)){t.next=8;break}return Object(d.a)("Некорректный промежуток дат","","warning"),t.abrupt("return");case 8:return t.next=10,m({dateStart:a,dateEnd:e});case 10:r=t.sent,this.dataCollection={checkoutCash:{labels:p(r.checkoutCash.map((function(t){return t.key}))),datasets:[{label:"Пополнений в кассе",data:p(r.checkoutCash.map((function(t){return t.sum}))),backgroundColor:Array(r.checkoutCash.length).fill("rgba(54, 162, 235, 0.2)"),borderColor:Array(r.checkoutCash.length).fill("rgba(54, 162, 235, 1)"),borderWidth:1}]},debts:{labels:p(r.debts.map((function(t){return t.key}))),datasets:[{label:"Денег в минусе",data:p(r.debts.map((function(t){return t.debt}))),backgroundColor:Array(r.debts.length).fill("rgba(54, 162, 235, 0.2)"),borderColor:Array(r.debts.length).fill("rgba(54, 162, 235, 1)"),borderWidth:1}]},increases:{labels:p(r.increases.map((function(t){return t.key}))),datasets:[{label:"Прирост абонентской платы",data:p(r.increases.map((function(t){return t.sum}))),backgroundColor:Array(r.increases.length).fill("rgba(54, 162, 235, 0.2)"),borderColor:Array(r.increases.length).fill("rgba(54, 162, 235, 1)"),borderWidth:1}]},decreases:{labels:p(r.decreases.map((function(t){return t.key}))),datasets:[{label:"Потери абонентской платы",data:p(r.decreases.map((function(t){return t.sum}))),backgroundColor:Array(r.decreases.length).fill("rgba(54, 162, 235, 0.2)"),borderColor:Array(r.decreases.length).fill("rgba(54, 162, 235, 1)"),borderWidth:1}]}};case 12:case"end":return t.stop()}}),t,this)})),y=function(){var t=this,a=arguments;return new Promise((function(e,r){var n=C.apply(t,a);function o(t){g(n,e,r,o,s,"next",t)}function s(t){g(n,e,r,o,s,"throw",t)}o(void 0)}))},function(){return y.apply(this,arguments)}),parseMonths:function(){for(var t=this,a=l()(),e=l()().subtract(11,"months").clone(),r=[];a>e||e.format("M")===a.format("M");)r.push(e.format("YYYY-MM")),e.add(1,"month");return r.map((function(a){var e=a.split("-"),r=e[0],n=t.monthNames[parseInt(e[1])-1];return{name:"".concat(n,", ").concat(r," г."),value:a+"-01"}})).reverse()},fillData:function(){this.dataCollection={labels:["Июль, 2019","Август, 2019","Сентябрь, 2019","Октябрь, 2019"],datasets:[{label:"Экономические показатели",data:[this.getRandomInt(),this.getRandomInt(),this.getRandomInt(),this.getRandomInt()],backgroundColor:["rgba(54, 162, 235, 0.2)","rgba(54, 162, 235, 0.2)","rgba(54, 162, 235, 0.2)","rgba(54, 162, 235, 0.2)"],borderColor:["rgba(54, 162, 235, 1)","rgba(54, 162, 235, 1)","rgba(54, 162, 235, 1)","rgba(54, 162, 235, 1)"],borderWidth:1}]}},getRandomInt:function(){return Math.floor(46*Math.random())+5}}},x=(e("CuGy"),e("KHd+")),w=Object(x.a)(k,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("v-card",[e("v-card-title",[t._v("\n            Экономическая статистика\n        ")]),t._v(" "),e("v-card-text",[e("div",{staticClass:"d-flex"},[e("v-select",{staticClass:"mr-5",attrs:{label:"Начало",items:t.months,"item-value":"value","item-text":"name"},model:{value:t.dateStart,callback:function(a){t.dateStart=a},expression:"dateStart"}}),t._v(" "),e("v-select",{staticClass:"ml-5",attrs:{label:"Конец",items:t.months,"item-value":"value","item-text":"name"},model:{value:t.dateEnd,callback:function(a){t.dateEnd=a},expression:"dateEnd"}})],1),t._v(" "),e("v-btn",{attrs:{color:"primary",block:""},on:{click:t.getData}},[t._v("Отобразить статистику")])],1),t._v(" "),t.dataCollection?e("div",[e("div",{staticClass:"chart-block"},[e("h2",{staticClass:"text-center"},[t._v("Пополнений в кассе")]),t._v(" "),e("BarChart",{attrs:{"chart-data":t.dataCollection.checkoutCash}})],1),t._v(" "),e("div",{staticClass:"chart-block"},[e("h2",{staticClass:"text-center"},[t._v("Денег в минусе")]),t._v(" "),e("BarChart",{attrs:{"chart-data":t.dataCollection.debts}})],1),t._v(" "),e("div",{staticClass:"chart-block"},[e("h2",{staticClass:"text-center"},[t._v("Прирост абонентской платы")]),t._v(" "),e("BarChart",{attrs:{"chart-data":t.dataCollection.increases}})],1),t._v(" "),e("div",{staticClass:"chart-block"},[e("h2",{staticClass:"text-center"},[t._v("Потери по абонентской плате")]),t._v(" "),e("BarChart",{attrs:{"chart-data":t.dataCollection.decreases}})],1)]):t._e()],1)],1)}),[],!1,null,"87d70534",null);a.default=w.exports},vl5K:function(t,a){function e(t){var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}e.keys=function(){return[]},e.resolve=e,t.exports=e,e.id="vl5K"},wd3j:function(t,a,e){(t.exports=e("I1BE")(!1)).push([t.i,".chart-block[data-v-87d70534]{border:1px solid #ccc;padding:20px;max-width:800px;margin:auto}",""])}}]);