(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"4T1+":function(e,t,a){"use strict";a("NlqS")},EPqS:function(e,t,a){var r=a("nhM5");"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(r,i);r.locals&&(e.exports=r.locals)},Gq8K:function(e,t,a){(e.exports=a("I1BE")(!1)).push([e.i,".clients-details[data-v-5070f69a]{margin:4px 16px 8px}.button-add[data-v-5070f69a]{margin:10px 0;width:240px}",""])},HCmw:function(e,t,a){"use strict";a("EPqS")},NlqS:function(e,t,a){var r=a("Gq8K");"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(r,i);r.locals&&(e.exports=r.locals)},RmQm:function(e,t,a){"use strict";var r={props:{state:{type:Boolean,default:!1}}},i=a("KHd+"),c=Object(i.a)(r,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-overlay",{model:{value:e.state,callback:function(t){e.state=t},expression:"state"}},[a("v-progress-circular",{attrs:{indeterminate:"",size:"80",color:"blue darken-1",width:"7"}})],1)}),[],!1,null,null,null);t.a=c.exports},U87Q:function(e,t,a){"use strict";a.r(t);var r=a("o0o1"),i=a.n(r),c=a("BWV3"),n=a("wq7B"),s=a("6cC8"),o=a("hlRy"),l=a("RmQm");function u(e,t,a,r,i,c,n){try{var s=e[c](n),o=s.value}catch(e){return void a(e)}s.done?t(o):Promise.resolve(o).then(r,i)}var d={props:{state:{type:Boolean,default:!0}},components:{VTextField:o.a,SimpleLoader:l.a},data:function(){return{valid:!1,certificate:{source_id:null,name:"",promocode:"",active:!1,certificate_lastname:"",certificate_firstname:"",certificate_patronymic:"",certificate_phone:"",certificate_months:1,certificate_sum:"",contact_lastname:"",contact_firstname:"",contact_patronymic:"",contact_phone:""},loading:!1}},computed:{sources:function(){var e=this.$store.getters[n.a.SOURCES];return e&&(e=e.map((function(e){return{text:e.name,value:e.id}}))),e}},methods:{submitForm:function(){var e,t=this;return(e=i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.$store.dispatch(s.a.CREATE_CERTIFICATE,t.certificate);case 3:t.clearForm(),t.loading=!1,t.$emit("onSave");case 6:case"end":return e.stop()}}),e)})),function(){var t=this,a=arguments;return new Promise((function(r,i){var c=e.apply(t,a);function n(e){u(c,r,i,n,s,"next",e)}function s(e){u(c,r,i,n,s,"throw",e)}n(void 0)}))})()},clearForm:function(){this.valid=!1,this.certificate={}},closeModal:function(){this.clearForm(),this.$emit("onClose")},required:function(e){return!!e||"Не заполнено"},onlyNumber:function(e){return!Number.isNaN(+e)||"Поле должно содержать только цифры"}}},f=a("KHd+");function v(e,t,a,r,i,c,n){try{var s=e[c](n),o=s.value}catch(e){return void a(e)}s.done?t(o):Promise.resolve(o).then(r,i)}function p(e){return function(){var t=this,a=arguments;return new Promise((function(r,i){var c=e.apply(t,a);function n(e){v(c,r,i,n,s,"next",e)}function s(e){v(c,r,i,n,s,"throw",e)}n(void 0)}))}}function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach((function(t){h(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var x={components:{AddCertificateModal:Object(f.a)(d,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{"max-width":"900",persistent:""},model:{value:e.state,callback:function(t){e.state=t},expression:"state"}},[a("v-card",[a("v-card-title",{staticClass:"headline blue darken-1 justify-content-between"},[a("span",{staticClass:"white--text"},[e._v("Добавление сертификата")]),e._v(" "),a("v-btn",{staticClass:"float-right",attrs:{icon:"",text:""},on:{click:e.closeModal}},[a("v-icon",{attrs:{color:"white"}},[e._v("\n                    mdi-close\n                ")])],1)],1),e._v(" "),a("v-card-text",[e.loading?e._e():a("v-form",{staticClass:"p-2",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[e.sources?a("v-select",{attrs:{items:e.sources,label:"Источник","no-data-text":"Источники не найдены",clearable:""},model:{value:e.certificate.source_id,callback:function(t){e.$set(e.certificate,"source_id",t)},expression:"certificate.source_id"}}):e._e(),e._v(" "),a("v-text-field",{attrs:{label:"Название",rules:[e.required]},model:{value:e.certificate.name,callback:function(t){e.$set(e.certificate,"name","string"==typeof t?t.trim():t)},expression:"certificate.name"}}),e._v(" "),a("div",{staticClass:"d-flex py-4"},[a("v-text-field",{staticClass:"w-50",attrs:{label:"Промокод",rules:[e.required]},model:{value:e.certificate.promocode,callback:function(t){e.$set(e.certificate,"promocode","string"==typeof t?t.trim():t)},expression:"certificate.promocode"}}),e._v(" "),a("v-checkbox",{staticClass:"w-50 ml-2",attrs:{label:"Активирован"},model:{value:e.certificate.active,callback:function(t){e.$set(e.certificate,"active",t)},expression:"certificate.active"}})],1),e._v(" "),a("v-tabs",[a("v-tabs-slider"),e._v(" "),a("v-tab",{attrs:{href:"#add-certificate-data"}},[e._v("Данные сертификата")]),e._v(" "),a("v-tab",{attrs:{href:"#add-contact-data"}},[e._v("Контактные данные")]),e._v(" "),a("v-tab-item",{attrs:{value:"add-contact-data"}},[a("v-card",{attrs:{flat:"",tile:""}},[a("v-card-text",[a("v-text-field",{attrs:{label:"Фамилия",rules:[e.required]},model:{value:e.certificate.contact_lastname,callback:function(t){e.$set(e.certificate,"contact_lastname",t)},expression:"certificate.contact_lastname"}}),e._v(" "),a("v-text-field",{attrs:{label:"Имя",rules:[e.required]},model:{value:e.certificate.contact_firstname,callback:function(t){e.$set(e.certificate,"contact_firstname",t)},expression:"certificate.contact_firstname"}}),e._v(" "),a("v-text-field",{attrs:{label:"Отчество",rules:[e.required]},model:{value:e.certificate.contact_patronymic,callback:function(t){e.$set(e.certificate,"contact_patronymic",t)},expression:"certificate.contact_patronymic"}}),e._v(" "),a("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:"+7 ### ### ## ##",expression:"'+7 ### ### ## ##'"}],attrs:{label:"Телефон",placeholder:"+7 ___ ___ __ __",rules:[e.required]},model:{value:e.certificate.contact_phone,callback:function(t){e.$set(e.certificate,"contact_phone",t)},expression:"certificate.contact_phone"}})],1)],1)],1),e._v(" "),a("v-tab-item",{attrs:{value:"add-certificate-data"}},[a("v-card",{attrs:{flat:"",tile:""}},[a("v-card-text",[a("v-text-field",{attrs:{label:"Фамилия",rules:[e.required]},model:{value:e.certificate.certificate_lastname,callback:function(t){e.$set(e.certificate,"certificate_lastname",t)},expression:"\n                                        certificate.certificate_lastname\n                                    "}}),e._v(" "),a("v-text-field",{attrs:{label:"Имя",rules:[e.required]},model:{value:e.certificate.certificate_firstname,callback:function(t){e.$set(e.certificate,"certificate_firstname",t)},expression:"\n                                        certificate.certificate_firstname\n                                    "}}),e._v(" "),a("v-text-field",{attrs:{label:"Отчество",rules:[e.required]},model:{value:e.certificate.certificate_patronymic,callback:function(t){e.$set(e.certificate,"certificate_patronymic",t)},expression:"\n                                        certificate.certificate_patronymic\n                                    "}}),e._v(" "),a("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:"+7 ### ### ## ##",expression:"'+7 ### ### ## ##'"}],attrs:{label:"Телефон",placeholder:"+7 ___ ___ __ __",rules:[e.required]},model:{value:e.certificate.certificate_phone,callback:function(t){e.$set(e.certificate,"certificate_phone",t)},expression:"certificate.certificate_phone"}}),e._v(" "),a("v-text-field",{attrs:{label:"Количество месяцев",type:"num",rules:[e.required,e.onlyNumber]},model:{value:e.certificate.certificate_months,callback:function(t){e.$set(e.certificate,"certificate_months",t)},expression:"certificate.certificate_months"}}),e._v(" "),a("v-text-field",{attrs:{label:"На сумму",type:"num",rules:[e.required,e.onlyNumber]},model:{value:e.certificate.certificate_sum,callback:function(t){e.$set(e.certificate,"certificate_sum",t)},expression:"certificate.certificate_sum"}})],1)],1)],1)],1)],1)],1),e._v(" "),e.loading?e._e():a("v-card-actions",{staticClass:"p-2"},[a("v-btn",{attrs:{text:""},on:{click:e.closeModal}},[e._v("Отмена")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{text:"",color:"success",disabled:!e.valid},on:{click:e.submitForm}},[a("b",[e._v("Создать")]),e._v(" "),a("v-icon",[e._v("mdi-check")])],1)],1),e._v(" "),a("v-progress-linear",{attrs:{indeterminate:"",active:e.loading,color:"green",absolute:"",bottom:""}})],1)],1)}),[],!1,null,null,null).exports},props:{title:{type:String,default:"Данные"}},computed:{certificates:function(){var e=this.$store.getters[n.a.CERTIFICATES];return e&&(e=e.map((function(e){return _(_({},e),!e.source&&{source:{name:"-"}})}))),e}},data:function(){return{showAddCertificateModal:!1,showLoader:!1,search:"",headers:[{text:"Название",value:"name"},{text:"Источник",value:"source.name"},{text:"Оплачен",value:"is_paid"},{text:"Активирован",value:"active"},{text:"Дата создания",value:"created_at"}]}},methods:{rowClick:function(e){var t=this;return p(i.a.mark((function a(){var r,c;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=e.id,c=e.source_id,a.next=3,t.$router.push({name:"Certificates.showCertificate",params:{sourceid:c||-1,id:r}});case 3:case"end":return a.stop()}}),a)})))()},updatePage:function(e){this.$store.commit("setCurrentPage",e)},saveCertificate:function(){var e=this;return p(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.closeModal(),e.$store.dispatch(s.a.GET_CERTIFICATES),e.$store.dispatch(s.a.GET_SOURCES),Object(c.a)("Сертификат успешно добавлен!");case 4:case"end":return t.stop()}}),t)})))()},openModal:function(){this.showAddCertificateModal=!0},closeModal:function(){this.showAddCertificateModal=!1}}},b=(a("HCmw"),Object(f.a)(x,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",[e._v("\n        "+e._s(e.title)+"\n    ")]),e._v(" "),a("v-card-text",[a("div",{staticClass:"clients-details"},[a("v-btn",{staticClass:"button-add",attrs:{color:"primary"},on:{click:e.openModal}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-ticket-confirmation")]),e._v("\n                Добавить сертификат\n            ")],1),e._v(" "),a("v-spacer"),e._v(" "),e.certificates?e._e():a("div",{staticClass:"text-center d-flex align-items-center justify-content-center",staticStyle:{"min-height":"651px"}},[a("v-progress-circular",{attrs:{indeterminate:"",size:"65",color:"primary"}})],1),e._v(" "),e.certificates?a("v-text-field",{attrs:{outlined:"",solo:"",clearable:"","append-icon":"mdi-magnify",label:"Поиск по сертификатам","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}):e._e()],1),e._v(" "),e.certificates?a("v-data-table",{attrs:{"no-results-text":"Нет результатов","no-data-text":"Нет данных",page:1,"footer-props":{"items-per-page-options":[10,15,{text:"Все",value:-1}],"items-per-page-text":"Записей на странице"},headers:e.headers,items:e.certificates,search:e.search},on:{"click:row":e.rowClick,"update:page":e.updatePage},scopedSlots:e._u([{key:"item.is_paid",fn:function(t){var r=t.item;return[a("v-icon",{attrs:{color:r.is_paid?"success":"error"}},[e._v("\n                    "+e._s(r.is_paid?"mdi-check":"mdi-close")+"\n                ")])]}},{key:"item.active",fn:function(t){var r=t.item;return[a("v-icon",{attrs:{color:r.active?"success":"error"}},[e._v("\n                    "+e._s(r.active?"mdi-check":"mdi-close")+"\n                ")])]}},{key:"footer.page-text",fn:function(t){var a=t.pageStart,r=t.pageStop,i=t.itemsLength;return[e._v("\n                "+e._s(a)+"-"+e._s(r)+" из "+e._s(i)+"\n            ")]}}],null,!1,1687695525)}):e._e()],1),e._v(" "),a("add-certificate-modal",{attrs:{state:e.showAddCertificateModal},on:{onSave:e.saveCertificate,onClose:e.closeModal}})],1)}),[],!1,null,"fa6d4672",null).exports);function g(e,t,a,r,i,c,n){try{var s=e[c](n),o=s.value}catch(e){return void a(e)}s.done?t(o):Promise.resolve(o).then(r,i)}var w={props:{state:{type:Boolean,default:!0}},components:{VTextField:o.a,SimpleLoader:l.a},data:function(){return{valid:!1,source:{name:"",text:""},loading:!1}},methods:{submitForm:function(){var e,t=this;return(e=i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.$store.dispatch(s.a.CREATE_SOURCE,t.source);case 3:t.clearform(),t.loading=!1,t.$emit("onSave");case 6:case"end":return e.stop()}}),e)})),function(){var t=this,a=arguments;return new Promise((function(r,i){var c=e.apply(t,a);function n(e){g(c,r,i,n,s,"next",e)}function s(e){g(c,r,i,n,s,"throw",e)}n(void 0)}))})()},clearform:function(){this.valid=!1,this.source={}},closeModal:function(){this.clearform(),this.$emit("onClose")},required:function(e){return!!e||"Не заполнено"},onlyNumber:function(e){return!Number.isNaN(+e)||"Поле должно содержать только цифры"}}};function y(e,t,a,r,i,c,n){try{var s=e[c](n),o=s.value}catch(e){return void a(e)}s.done?t(o):Promise.resolve(o).then(r,i)}function k(e){return function(){var t=this,a=arguments;return new Promise((function(r,i){var c=e.apply(t,a);function n(e){y(c,r,i,n,s,"next",e)}function s(e){y(c,r,i,n,s,"throw",e)}n(void 0)}))}}var C={components:{AddSourceModal:Object(f.a)(w,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{"max-width":"900",persistent:""},model:{value:e.state,callback:function(t){e.state=t},expression:"state"}},[a("v-card",[a("v-card-title",{staticClass:"headline blue darken-1 justify-content-between"},[a("span",{staticClass:"white--text"},[e._v("Добавление источника")]),e._v(" "),a("v-btn",{staticClass:"float-right",attrs:{icon:"",text:""},on:{click:e.closeModal}},[a("v-icon",{attrs:{color:"white"}},[e._v("\n                    mdi-close\n                ")])],1)],1),e._v(" "),a("v-card-text",[e.loading?e._e():a("v-form",{staticClass:"p-2",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-text-field",{attrs:{label:"Название",rules:[e.required]},model:{value:e.source.name,callback:function(t){e.$set(e.source,"name","string"==typeof t?t.trim():t)},expression:"source.name"}}),e._v(" "),a("v-textarea",{attrs:{label:"Описание",rules:[e.required]},model:{value:e.source.text,callback:function(t){e.$set(e.source,"text","string"==typeof t?t.trim():t)},expression:"source.text"}})],1)],1),e._v(" "),e.loading?e._e():a("v-card-actions",{staticClass:"p-2"},[a("v-btn",{attrs:{text:""},on:{click:e.closeModal}},[e._v("Отмена")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{text:"",color:"success",disabled:!e.valid},on:{click:e.submitForm}},[a("b",[e._v("Создать")]),e._v(" "),a("v-icon",[e._v("mdi-check")])],1)],1),e._v(" "),a("v-progress-linear",{attrs:{indeterminate:"",active:e.loading,color:"green",absolute:"",bottom:""}})],1)],1)}),[],!1,null,null,null).exports},props:{title:{type:String,default:"Данные"}},computed:{sources:function(){return this.$store.getters[n.a.SOURCES]}},data:function(){return{showAddSourceModal:!1,showLoader:!1,search:"",headers:[{text:"Название",value:"name"},{text:"Описание",value:"text"},{text:"Дата создания",value:"created_at"}]}},methods:{rowClick:function(e){var t=this;return k(i.a.mark((function a(){var r;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=e.id,a.next=3,t.$router.push({name:"Certificates.showSource",params:{sourceid:r}});case 3:case"end":return a.stop()}}),a)})))()},updatePage:function(e){this.$store.commit("setCurrentPage",e)},saveSource:function(){var e=this;return k(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.closeModal(),e.$store.dispatch(s.a.GET_SOURCES),Object(c.a)("Источник успешно добавлен!");case 3:case"end":return t.stop()}}),t)})))()},openModal:function(){this.showAddSourceModal=!0},closeModal:function(){this.showAddSourceModal=!1}}},S=(a("4T1+"),{mounted:function(){this.$store.dispatch(s.a.GET_CERTIFICATES),this.$store.dispatch(s.a.GET_SOURCES)},components:{CertificatesTable:b,SourcesTable:Object(f.a)(C,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",[e._v("\n        "+e._s(e.title)+"\n    ")]),e._v(" "),a("v-card-text",[a("div",{staticClass:"clients-details"},[a("v-btn",{staticClass:"button-add",attrs:{color:"primary"},on:{click:e.openModal}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-ticket-confirmation")]),e._v("\n                Добавить источник\n            ")],1),e._v(" "),a("v-spacer"),e._v(" "),e.sources?e._e():a("div",{staticClass:"text-center d-flex align-items-center justify-content-center",staticStyle:{"min-height":"651px"}},[a("v-progress-circular",{attrs:{indeterminate:"",size:"65",color:"primary"}})],1),e._v(" "),e.sources?a("v-text-field",{attrs:{outlined:"",solo:"",clearable:"","append-icon":"mdi-magnify",label:"Поиск по источникам","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}):e._e()],1),e._v(" "),e.sources?a("v-data-table",{staticStyle:{"white-space":"pre-line"},attrs:{"no-results-text":"Нет результатов","no-data-text":"Нет данных",page:1,"footer-props":{"items-per-page-options":[10,15,{text:"Все",value:-1}],"items-per-page-text":"Записей на странице"},headers:e.headers,items:e.sources,search:e.search},on:{"click:row":e.rowClick,"update:page":e.updatePage},scopedSlots:e._u([{key:"footer.page-text",fn:function(t){var a=t.pageStart,r=t.pageStop,i=t.itemsLength;return[e._v("\n                "+e._s(a)+"-"+e._s(r)+" из "+e._s(i)+"\n            ")]}}],null,!1,2127685872)}):e._e()],1),e._v(" "),a("add-source-modal",{attrs:{state:e.showAddSourceModal},on:{onSave:e.saveSource,onClose:e.closeModal}})],1)}),[],!1,null,"5070f69a",null).exports},data:function(){return{currentSegment:"certificates"}}}),$=Object(f.a)(S,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-card-text",[a("div",{staticClass:"d-flex p-2"},[a("v-btn",{staticStyle:{width:"300px"},attrs:{depressed:"",color:"certificates"===e.currentSegment?"primary":""},on:{click:function(t){e.currentSegment="certificates"}}},[e._v("Сертификаты\n            ")]),e._v(" "),a("v-btn",{staticStyle:{width:"300px"},attrs:{depressed:"",color:"sources"===e.currentSegment?"primary":""},on:{click:function(t){e.currentSegment="sources"}}},[e._v("Источники\n            ")])],1),e._v(" "),a("div",{staticClass:"p-4"},["certificates"===e.currentSegment?a("certificates-table",{attrs:{title:"Сертификаты"}}):a("sources-table",{attrs:{title:"Источники"}})],1)])],1)}),[],!1,null,null,null);t.default=$.exports},nhM5:function(e,t,a){(e.exports=a("I1BE")(!1)).push([e.i,".clients-details[data-v-fa6d4672]{margin:4px 16px 8px}.button-add[data-v-fa6d4672]{margin:10px 0;width:240px}",""])}}]);